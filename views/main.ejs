<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Main Page</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./watch.css" />
  </head>
  <body class="main-page">
    <%- include('partials/header') %>
    
    <main>
      <h1> Hello, <%= user.username %></h1>

      <% movies.forEach(movie => { %>
      <div class="cover" id="<%= movie._id %>">
        <img
          src="<%= movie.coverImagePath %>"
          alt="<%= movie.title %>"
          class="cover-image"
        />
        <button class="play-overlay">â–¶</button>

        <div class="video-wrapper hidden">
          <video
            class="cover-video"
            src="<%= movie.videoPath %>"
            preload="metadata"
            playsinline
          ></video>

          <div class="controls">
            <button class="backward">Â« 10s</button>
            <button class="playPause">â–¶</button>
            <button class="forward">10s Â»</button>

            <!-- hover-to-show horizontal volume -->
            <div class="volume-control">
              <button class="volumeToggle">ðŸ”Š</button>
              <input
                type="range"
                class="volumeSlider"
                min="0"
                max="1"
                step="0.05"
                value="1"
              />
            </div>

            <input
              type="range"
              class="timeline"
              min="0"
              max="100"
              value="0"
              step="0.1"
            />
            <span class="time-display">00:00 / 00:00</span>
            <button class="fullscreen">â›¶</button>
          </div>
        </div>
      </div>
      <% }) %>
    </main>

    <script>
      window.CURRENT_USER_ID = "<%= user ? user._id : 'guest' %>";
      window.CURRENT_PROFILE =
        "<%= activeProfile ? activeProfile.name : 'Default' %>";
    </script>

    <script src="/js/watch.js"></script>
  </body>
</html>
